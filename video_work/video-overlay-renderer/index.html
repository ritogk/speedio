<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<link rel="stylesheet" href="./main.css" />
	</head>
		<body style="background: #00ff00;">
			<video id="bg-video" src="data/IMG_2301a.MOV" playsinline preload="metadata"></video>
			<div class="app-root">
				<div id="error" class="error-banner" style="display: none"></div>
				<!-- full-map 全画面モード用のコンテナ -->
				<div id="fullmap-container" class="fullmap-mode" style="display: none;">
					<div id="full-map-fullscreen">
						<svg id="path-view-full-fullscreen" viewBox="0 0 800 600" preserveAspectRatio="xMidYMid meet"></svg>
					</div>
					<div class="controls">
						<button id="play-btn-fullscreen">▶ 再生</button>
						<button id="pause-btn-fullscreen" class="secondary" disabled>⏸ 一時停止</button>
						<div class="slider">
							<input id="index-slider-fullscreen" type="range" min="0" max="0" value="0" step="1" />
						</div>
						<div class="time-label">
							<div id="playback-elapsed-fullscreen">00:00 / 00:00</div>
							<div id="time-label-abs-fullscreen">--:--:--</div>
						</div>
					</div>
				</div>
				<div class="main-layout">
					<!-- right-panel -->
					<div class="right-panel">
						<!-- 右カラムの一番上に full マップを固定表示 -->
						<div id="full-map-container">
							<svg id="path-view-full" viewBox="0 0 800 600" preserveAspectRatio="xMidYMid meet"></svg>
						</div>
						
						<div class="chart-container">
							<div class="chart-header">
								<span>標高プロファイル</span>
								<span id="chart-range" style="font-size: 11px; color: #6b7280"></span>
							</div>
							<!-- 標高チャート -->
							<div class="chart-wrapper">
								<svg id="elevation-chart" viewBox="0 0 800 220" preserveAspectRatio="none"></svg>
								<div class="legend">
									<div class="legend-item">
										<span class="legend-color path-total"></span>
										<span>全区間（地図）</span>
									</div>
									<div class="legend-item">
										<span class="legend-color path-played"></span>
										<span>再生済み区間（地図）</span>
									</div>
									<div class="legend-item">
										<span class="legend-color chart-elev"></span>
										<span>標高 (m)</span>
									</div>
									<div class="legend-item">
										<span class="legend-color chart-cursor"></span>
										<span>現在位置</span>
									</div>
								</div>
								<div class="chart-caption">スライダー or 再生ボタンで、時間に沿って位置と標高が同期して動きます。</div>
							</div>
						</div>
						<!-- ミニマップ -->
						<div id="mini-map-container">
							<svg id="path-view-mini" viewBox="0 0 800 600" preserveAspectRatio="xMidYMid meet"></svg>
						</div>
					</div>
					<!-- left-panel -->
					<div class="left-panel">
							<div id="video-time-setup" class="video-setup">
							<span>動画開始位置</span>
							<input id="video-start-input" type="text" placeholder="mm:ss または 秒" value="56"/>
							<button id="video-start-apply">OK</button>
						</div>
						<div class="controls">
						<button id="play-btn">▶ 再生</button>
						<button id="pause-btn" class="secondary" disabled>⏸ 一時停止</button>
						<button id="fullmap-btn" title="全画面表示（Fキー）">🖵 全画面</button>

						<div class="slider">
							<input id="index-slider" type="range" min="0" max="0" value="0" step="1" />
						</div>

						<div class="time-label">
							<div id="playback-elapsed">00:00 / 00:00</div>
							<div id="time-label-abs">--:--:--</div>
						</div>
					</div>

						<div class="status-bar">
							<span>Index: <strong id="status-index">-</strong></span>
							<span>標高: <strong id="status-elev">- m</strong></span>
							<span>座標: <strong id="status-latlon">-</strong></span>
						</div>
				</div>
			</div>
		</div>

			<script type="module" src="./main.js"></script>
	</body>
	</html>

